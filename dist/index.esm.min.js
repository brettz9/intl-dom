function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r,t,n,o,u,a){try{var i=e[u](a),c=i.value}catch(e){return void t(e)}i.done?r(c):Promise.resolve(c).then(n,o)}function t(e){return function(){var t=this,n=arguments;return new Promise((function(o,u){var a=e.apply(t,n);function i(e){r(a,o,u,i,c,"next",e)}function c(e){r(a,o,u,i,c,"throw",e)}i(void 0)}))}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw u}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(e,r){if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof r)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return t(regeneratorRuntime.mark((function t(){var n,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));case 1:return u=e.shift(),t.prev=3,t.next=6,o;case 6:return n=t.sent,t.abrupt("break",15);case 10:t.prev=10,t.t0=t.catch(3),o=r(u);case 13:t.next=1;break;case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))()},a=function(e,r){return"".concat(r.replace(/\/$/,""),"/_locales/").concat(e,"/messages.json")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.messageStyle,t=void 0===r?"rich":r;return"function"==typeof t?t:"rich"===t?function(e,r){return!!(r in e&&e[r]&&"message"in e[r]&&"string"==typeof e[r].message)&&e[r].message}:"plain"===t?function(e,r){return!!(r in e&&e[r]&&"string"==typeof e[r])&&e[r]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()},c=function(r){var t=r.message,n=r.defaults,o=r.messageStyle,u=r.messageForKey,a=void 0===u?i({messageStyle:o}):u,c=r.key,s="string"==typeof t?t:!1!==n&&(n&&"object"===e(n)?a(n,c):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}());if(!1===s)throw new Error("Key value not found for key: (".concat(c,")"));return s},s=function(e){var r=e.string,t=e.substitutions,o=void 0!==t&&t,u=e.dom,a=void 0!==u&&u,i=e.forceNodeReturn,c=void 0!==i&&i,s=e.throwOnMissingSuppliedFormatters,l=void 0===s||s,f=e.throwOnExtraSuppliedFormatters,p=void 0===f||f,F=e.bracketRegex,y=void 0===F?/(\\*)\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:F,m=function(e){return c?document.createTextNode(e):e},v=[],h=function(){p&&Object.keys(o).forEach((function(e){if(!v.includes(e))throw new Error("Extra formatting key: ".concat(e))}))},g=function(e){if(l&&!(e in o))throw new Error("Missing formatting key ".concat(e))};if(!o)return m(r);if(!a){var d=!1,b=r.replace(y,(function(e,r,t,n){if(r.length%2)return e;g(t);var u=o[t];return"function"==typeof u&&(u=u(n)),d=d||u&&1===u.nodeType,v.push(t),u}));if(h(),!d)return m(b);v.length=0}for(var w,D=[],x=0;null!==(w=y.exec(r));){var S=n(w,4),E=S[0],k=S[1],R=S[2],j=S[3];if(!(E%2)){var B=y.lastIndex,A=B-k.length;A>x&&D.push(r.slice(x,A)),g(R);var C=o[R];"function"==typeof C&&(C=C(j)),D.push(C),x=B,v.push(R)}}x!==r.length&&D.push(r.slice(x)),h();var O=document.createDocumentFragment();return O.append.apply(O,D),O},l=function(){var e=t(regeneratorRuntime.mark((function e(r){var n,i,c,s,l,f,p,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.locales,i=void 0===n?navigator.languages:n,c=r.defaultLocales,s=void 0===c?["en-US"]:c,l=r.localeResolver,f=void 0===l?a:l,p=r.localesBasePath,F=void 0===p?".":p,e.next=3,u([].concat(o(i),o(s)),function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(t,F),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),t.includes("-")){e.next=13;break}throw new Error("Locale not available");case 13:return e.abrupt("return",r(t.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));function r(r){return e.apply(this,arguments)}return r}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=function(){var r=t(regeneratorRuntime.mark((function r(t){var n,o,u,a,f,p,F,y,m,v,h,g;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.locales,o=t.defaultLocales,u=t.localesBasePath,a=t.localeResolver,f=t.defaults,p=t.messageStyle,F=t.forceNodeReturn,y=t.throwOnMissingSuppliedFormatters,m=t.throwOnExtraSuppliedFormatters,v=t.bracketRegex,r.next=3,l({locales:n,defaultLocales:o,localeResolver:a,localesBasePath:u});case 3:if((h=r.sent)&&"object"===e(h)){r.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return g=i({messageStyle:p}),r.abrupt("return",(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.dom,o=g(h,e),u=c({message:o,defaults:f,messageForKey:g,key:e});return s({string:u,substitutions:r,dom:n,forceNodeReturn:F,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:m,bracketRegex:v})}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();export{a as defaultLocaleResolver,l as findLocaleStrings,s as getDOMForLocaleString,i as getMessageForKeyByStyle,c as getStringFromMessageAndDefaults,f as i18n,u as promiseChainForValues};
//# sourceMappingURL=index.esm.min.js.map
