function e(r){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(r)}function r(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,o)}function t(e){return function(){var t=this,n=arguments;return new Promise((function(o,u){var a=e.apply(t,n);function c(e){r(a,o,u,c,i,"next",e)}function i(e){r(a,o,u,c,i,"throw",e)}c(void 0)}))}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,o=!1,u=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(e,r){return e.reduce(function(){var e=t(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",r(n));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(r,t){return e.apply(this,arguments)}}(),Promise.reject(new Error("Intentionally reject so as to begin checking chain")))},a=function(e,r){return"".concat(r.replace(/\/$/,""),"/_locales/").concat(e,"/messages.json")},c=function(){var e=t(regeneratorRuntime.mark((function e(r){var n,c,i,s,l,f,p,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.locales,c=void 0===n?navigator.languages:n,i=r.defaultLocales,s=void 0===i?["en-US"]:i,l=r.localeResolver,f=void 0===l?a:l,p=r.localesBasePath,F=void 0===p?".":p,e.next=3,u([].concat(o(c),o(s)),function(){var e=t(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(t,F),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),t.includes("-")){e.next=13;break}throw new Error("Locale not available");case 13:return e.abrupt("return",r(t.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));function r(r){return e.apply(this,arguments)}return r}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.messageStyle,t=void 0===r?"rich":r;return"function"==typeof t?t:"rich"===t?function(e,r){return!!(r in e&&e[r]&&"message"in e[r]&&"string"==typeof e[r].message)&&e[r].message}:"plain"===t?function(e,r){return!!(r in e&&e[r]&&"string"==typeof e[r])&&e[r]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()},s=function(r){var t=r.message,n=r.defaults,o=r.messageStyle,u=r.messageForKey,a=void 0===u?i({messageStyle:o}):u,c=r.key,s="string"==typeof t?t:!1===n?function(){throw new Error("Key value not found for key: (".concat(c,")"))}():n&&"object"===e(n)?a(n,c):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}();if(!1===s)throw new Error("Key value not found for key: (".concat(c,")"));return s},l=function(e){var r=e.string,t=e.substitutions,o=e.dom,u=e.bracketRegex,a=void 0===u?/\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:u,c=e.forceNodeReturn;if(!t)return void 0!==c&&c?document.createTextNode(r):r;if(!o){var i=!1,s=r.replace(a,(function(e,r,n){var o=t[r];return"function"==typeof o&&(o=o(n)),i=i||o&&1===o.nodeType,o}));if(!i)return s}for(var l,f=[],p=0;null!==(l=a.exec(r));){var F=a.lastIndex,y=n(l,3),v=y[0],m=y[1],g=y[2],d=t[m];"function"==typeof d&&(d=d(g));var h=F-v.length;h>p&&f.push(r.slice(p,h)),f.push(d),p=F}p!==r.length&&f.push(r.slice(p));var D=document.createDocumentFragment();return D.append.apply(D,f),D},f=function(){var r=t(regeneratorRuntime.mark((function r(t){var n,o,u,a,f,p,F,y,v,m;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.locales,o=t.defaultLocales,u=t.localesBasePath,a=t.localeResolver,f=t.defaults,p=t.messageStyle,F=t.bracketRegex,y=t.forceNodeReturn,r.next=3,c({locales:n,defaultLocales:o,localeResolver:a,localesBasePath:u});case 3:if((v=r.sent)&&"object"===e(v)){r.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return m=i({messageStyle:p}),r.abrupt("return",(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.dom,o=m(v,e),u=s({message:o,defaults:f,messageForKey:m,key:e});return l({string:u,substitutions:r,forceNodeReturn:y,dom:n,bracketRegex:F})}));case 8:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}();export{a as DefaultLocaleResolver,c as findLocaleStrings,l as getDOMForLocaleString,i as getMessageForKeyByStyle,s as getStringFromMessageAndDefaults,f as i18n,u as promiseChainForValues};
//# sourceMappingURL=index.esm.min.js.map
