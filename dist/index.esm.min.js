function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function t(e,t,r){return t=a(t),function(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,[],a(e).constructor):t.apply(e,r))}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,v(n.key),n)}}function o(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e,t,r){return(t=v(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(s=function(){return!!e})()}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,u=[],s=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function h(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||g(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function g(t,r){if(t){if("string"==typeof t)return e(t,r);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}function m(){m=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,o){var i=RegExp(e,n);return t.set(i,o||t.get(e)),f(i,r.prototype)}function n(e,r){var n=t.get(r);return Object.keys(n).reduce((function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var i=0;void 0===e[o[i]]&&i+1<o.length;)i++;t[r]=e[o[i]]}return t}),Object.create(null))}return u(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=n(r,this);var o=r.indices;o&&(o.groups=n(o,this))}return r},r.prototype[Symbol.replace]=function(r,o){if("string"==typeof o){var i=t.get(this);return e[Symbol.replace].call(this,r,o.replace(/\$<([^>]+)(>|$)/g,(function(e,t,r){if(""===r)return e;var n=i[t];return Array.isArray(n)?"$"+n.join("$"):"number"==typeof n?"$"+n:""})))}if("function"==typeof o){var a=this;return e[Symbol.replace].call(this,r,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(n(e,a)),o.apply(this,e)}))}return e[Symbol.replace].call(this,r,o)},m.apply(this,arguments)}var b=globalThis.jsonExtra,w=function(e){b=e},F=function(e){return e.replaceAll(/\\+/g,(function(e){return e.slice(0,e.length/2)}))},E=function(e){return b.parse("{"+(e||"").replace(/^\{/,"").replace(/\}$/,"")+"}")},D=function(e,t,r){var n,o=r.onMatch,i=r.extra,a=r.betweenMatches,u=r.afterMatch,s=r.escapeAtOne,c=0;if(i&&(a=i,u=i,s=i),!a||!u)throw new Error("You must have `extra` or `betweenMatches` and `afterMatch` arguments.");for(;null!==(n=e.exec(t));){var l=p(n,2),f=l[0],y=l[1],v=e.lastIndex,d=v-f.length;d>c&&a(t.slice(c,d)),s&&y.length%2?(c=v,s(f)):(o.apply(void 0,h(n)),c=v)}c!==t.length&&u(t.slice(c))},S="undefined"!=typeof fetch?fetch:null,j=function(e){S=e},x=function(){return S},k="undefined"!=typeof document?document:null,O=function(e){k=e},M=function(){return k};var T,A,R=function(e,t,r){return t.sort(new Intl.Collator(e,r).compare)},N=function(e,t,r){return new Intl.ListFormat(e,r).format(t)},P=function(e,t,r,n,o){if("function"!=typeof r)return function(e,t,r,n){return R(e,t,n),N(e,t,r)}(e,t,r,n);R(e,t,o);var i,a=(i=Date.now(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,(function(e){var t=Math.trunc((i+16*Math.random())%16);return i=Math.floor(i/16),("x"===e?t:3&t|8).toString(16)}))),u=h(t).map((function(e,t){return"<<".concat(a).concat(t,">>")})),s=[],c=function(e){s.push(e)};D(new RegExp("<<".concat(a,"(\\d)>>"),"gu"),N(e,u,n),{betweenMatches:c,afterMatch:c,onMatch:function(e,n){c(r(t[Number(n)],Number(n)))}});var l=M().createDocumentFragment();return l.append.apply(l,s),l},L=function(e){var t=e.object;if(Array.isArray(t)){if("function"==typeof t[1]){var r=p(t,4);return{value:r[0],callback:r[1],options:r[2],extraOpts:r[3]}}var n=p(t,3);return{value:n[0],options:n[1],extraOpts:n[2]}}return{value:t}},I=function(e){var t,r=e.value,n=e.arg,o=e.locale;if("string"==typeof r||r&&"object"===d(r)&&"nodeType"in r)return r;var i=function(e){var r=e.type,o=e.options,i=void 0===o?t:o,a=e.checkArgOptions,u=void 0!==a&&a;if("string"==typeof n){var s=p(n.split("|"),3),c=s[0],f=s[1],y=s[2];"DATE"===c&&(c="DATETIME"),c===r&&(f?u&&!y||(i=l(l({},i),E(u&&y?y:f))):i={})}return i},a=!1;if(r&&"object"===d(r)&&!Array.isArray(r)){var u=Object.keys(r)[0];if(["number","date","datetime","dateRange","datetimeRange","relative","region","language","script","currency","list","plural"].includes(u)){var s,c,f=r[u],y=L({object:f});switch(r=y.value,t=y.options,s=y.extraOpts,c=y.callback,u){case"date":case"datetime":a=!0;break;case"dateRange":case"datetimeRange":var v=new Intl.DateTimeFormat(o,i({type:"DATERANGE",options:s}));return v.formatRange.apply(v,h([r,t].map((function(e){return"number"==typeof e?new Date(e):e}))));case"region":case"language":case"script":case"currency":return new Intl.DisplayNames(o,l(l({},i({type:u.toUpperCase()})),{},{type:u})).of(r);case"relative":var g=[t,s];return s=g[0],t=g[1],new Intl.RelativeTimeFormat(o,i({type:"RELATIVE"})).format(r,s);case"list":return c?P(o,r,c,i({type:"LIST"}),i({type:"LIST",options:s,checkArgOptions:!0})):P(o,r,i({type:"LIST"}),i({type:"LIST",options:s,checkArgOptions:!0}))}}}if(r&&("number"==typeof r&&(a||/^DATE(?:TIME)(?:\||$)/.test(n))&&(r=new Date(r)),"object"===d(r)&&"getTime"in r&&"function"==typeof r.getTime))return new Intl.DateTimeFormat(o,i({type:"DATETIME"})).format(r);if(Array.isArray(r)){var m,b=r[2];return(m=new Intl.DateTimeFormat(o,i({type:"DATERANGE",options:b}))).formatRange.apply(m,h(r.slice(0,2).map((function(e){return"number"==typeof e?new Date(e):e}))))}if("number"==typeof r)return new Intl.NumberFormat(o,i({type:"NUMBER"})).format(r);throw new TypeError("Unknown formatter")},C=o((function e(){r(this,e)})),B=function(e){var t=e.key,r=e.body,n=e.type,o=e.messageStyle,i=J({messageStyle:void 0===o?"richNested":o})({body:r},t);if(!i)throw new Error("Key value not found for ".concat(n," key: (").concat(t,")"));return i.value},K=function(){function e(n){var o;return r(this,e),(o=t(this,e)).locals=n,o}return u(e,C),o(e,[{key:"getSubstitution",value:function(e){return B({key:e.slice(1),body:this.locals,type:"local"})}},{key:"isMatch",value:function(e){var t=e.slice(1).split("."),r=this.locals;return this.constructor.isMatchingKey(e)&&t.every((function(e){var t=e in r;return r=r[e],t}))}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("-")}}])}(),U=function(){function e(n){var o;return r(this,e),(o=t(this,e)).substitutions=n,o}return u(e,C),o(e,[{key:"isMatch",value:function(e){return this.constructor.isMatchingKey(e)&&e in this.substitutions}}],[{key:"isMatchingKey",value:function(e){return/^[0-9A-Z_a-z]/.test(e)}}])}(),$=function(){function e(n,o){var i,a=o.substitutions;return r(this,e),(i=t(this,e)).switches=n,i.substitutions=a,i}return u(e,C),o(e,[{key:"getSubstitution",value:function(e,t){var r,n,o=t.locale,i=t.usedKeys,a=t.arg,u=t.missingSuppliedFormatters,s=this.constructor.getKey(e).slice(1),c=p(this.getMatch(s),3),f=c[0],h=c[1],v=c[2];if(i.push(v),f&&f.includes("|")){var g=p(f.split("|"),3);r=g[1],n=g[2]}if(!h)return u({key:e,formatter:this}),String.raw(T||(T=y(["{"],["\\{"])))+e+"}";var m=function(e,t){var r=E(n);return new Intl.NumberFormat(o,l(l({},t),r)).format(e)},b=function(e,t){var r=E(n);return new Intl.PluralRules(o,l(l({},t),r)).select(e)},w=this.substitutions[v],F=w;if("number"==typeof w)switch(r){case"NUMBER":F=m(w);break;case"PLURAL":F=b(w);break;default:F=new Intl.PluralRules(o).select(w)}else if(w&&"object"===d(w)){var D=Object.keys(w)[0];if(["number","plural"].includes(D)){var S=L({object:w[D]}),j=S.value,x=S.options;if(r||(r=D.toUpperCase()),!(D.toUpperCase()===r))throw new TypeError('Expecting type "'.concat(r.toLowerCase(),'"; instead found "').concat(D,'".'));switch(r){case"NUMBER":F=m(j,x);break;case"PLURAL":F=b(j,x)}}}var k="richNested",O=function(e){return e.replaceAll("\\","\\\\").replaceAll(".",String.raw(A||(A=y(["."],["\\."]))))};try{return B({messageStyle:k,key:F?O(F):a,body:h,type:"switch"})}catch(e){try{return B({messageStyle:k,key:"*"+O(F),body:h,type:"switch"})}catch(e){var M=Object.keys(h).find((function(e){return e.startsWith("*")}));if(!M)throw new Error("No defaults found for switch ".concat(s));return B({messageStyle:k,key:O(M),body:h,type:"switch"})}}}},{key:"isMatch",value:function(e){return Boolean(e&&this.constructor.isMatchingKey(e)&&this.getMatch(e.slice(1)).length)}},{key:"getMatch",value:function(e){var t=this,r=e.split(".");return r.reduce((function(n,o,i){if(i<r.length-1){if(!(o in n))throw new Error('Switch key "'.concat(o,'" not found (from "~').concat(e,'")'));return n[o]}var a=Object.entries(n).find((function(e){var r=p(e,1)[0];return o===t.constructor.getKey(r)}));return a?[].concat(h(a),[o]):[]}),this.switches)}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("~")}},{key:"getKey",value:function(e){var t=e.match(/^(?:[\0-\{\}-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);return t&&t[0]}}])}();function _(e,t,r){if(!e.s){if(r instanceof G){if(!r.s)return void(r.o=_.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(_.bind(null,e,t),_.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var G=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var i=1&o?t:r;if(i){try{_(n,1,i(this.v))}catch(e){_(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?_(n,1,t?t(o):o):r?_(n,1,r(o)):_(n,2,o)}catch(e){_(n,2,e)}},n},e}();function W(e){return e instanceof G&&1&e.s}var V,z,Y=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof t)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return(r=function(){var r,o,i,a,u=!1,s=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));return i=function(e,t,r){for(var n;;){var o=e();if(W(o)&&(o=o.v),!o)return i;if(o.then){n=0;break}var i=r();if(i&&i.then){if(!W(i)){n=1;break}i=i.s}}var a=new G,u=_.bind(null,a,2);return(0===n?o.then(c):1===n?i.then(s):(void 0).then((function(){(o=e())?o.then?o.then(c).then(void 0,u):c(o):_(a,1,i)}))).then(void 0,u),a;function s(t){i=t;do{if(!(o=e())||W(o)&&!o.v)return void _(a,1,i);if(o.then)return void o.then(c).then(void 0,u);W(i=r())&&(i=i.v)}while(!i||!i.then);i.then(s).then(void 0,u)}function c(e){e?(i=r())&&i.then?i.then(s).then(void 0,u):s(i):_(a,1,i)}}((function(){return!u}),0,(function(){var i=e.shift();return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(s,(function(e){r=e,u=!0}))}),(function(){if(o)throw new Error(n);e.length||(o=!0),s=t(i)}))})),a=function(e){return r},i&&i.then?i.then(a):a(i)},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(r.apply(this,e))}catch(e){return Promise.reject(e)}})()},H=function(e,t){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");if(/[\.\/\\]/.test(t))throw new TypeError("Locales cannot use file-reserved characters, `.`, `/` or `\\`");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(t,"/messages.json")},Z=function(e){var t=e.string,r=e.dom,n=e.usedKeys,o=e.substitutions,i=e.allSubstitutions,a=e.locale,u=e.locals,s=e.switches,c=e.maximumLocalNestingDepth,f=void 0===c?3:c,y=e.missingSuppliedFormatters,v=e.checkExtraSuppliedFormatters;if("number"!=typeof f)throw new TypeError("`maximumLocalNestingDepth` must be a number.");var g=function(){Object.entries(o).forEach((function(e){var t=p(e,2),r=t[0];"function"==typeof t[1]&&n.push(r)}))};g();var m=new K(u),b=new U(o),w=new $(s,{substitutions:o}),S=/(\\*)\{((?:(?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\\})*?)(?:(\|)((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g;i&&(i=Array.isArray(i)?i:[i]);var j=function(e){var t,r=e.key,o=e.arg,u=e.substs;return m.constructor.isMatchingKey(r)?t=m.getSubstitution(r):w.constructor.isMatchingKey(r)?t=w.getSubstitution(r,{locale:a,usedKeys:n,arg:o,missingSuppliedFormatters:y}):"function"==typeof(t=u[r])&&(t=t({arg:o,key:r})),i?t=i.reduce((function(e,t){return t({value:e,arg:o,key:r,locale:a})}),t):o&&/^(?:NUMBER|DATE(?:TIME|RANGE|TIMERANGE)?|REGION|LANGUAGE|SCRIPT|CURRENCY|RELATIVE|LIST)(?:\||$)/.test(o)&&(t=I({value:t,arg:o,locale:a})),t},x=1,k=function(e){var t=e.substitution,r=e.ky,n=e.arg,i=e.processSubsts,a=t;if("string"==typeof t&&t.includes("{")){if(x++>f)throw new TypeError("Too much recursion in local variables.");if(m.constructor.isMatchingKey(r)){var u,s=o;n&&(u=E(n),s=l(l({},o),u)),a=i({str:t,substs:s,formatter:m}),u&&v({substitutions:u})}else w.constructor.isMatchingKey(r)&&(a=i({str:t}))}return a};if(!r){var O=!1,M=function(e){var t=e.str,r=e.substs,i=void 0===r?o:r,a=e.formatter,u=void 0===a?b:a;return t.replaceAll(S,(function(e,t,r,o,a){if(t.length%2)return e;if(y({key:r,formatter:u}))return e;var s=j({key:r,arg:a,substs:i});return s=k({substitution:s,ky:r,arg:a,processSubsts:M}),O=O||null!==s&&"object"===d(s)&&"nodeType"in s,n.push(r),t+s}))},T=M({str:t});if(!O)return v({substitutions:o}),n.length=0,g(),F(T);n.length=0,g()}x=1;var A=function(e){var t=e.str,r=e.substs,i=void 0===r?o:r,a=e.formatter,u=void 0===a?b:a,s=[],c=new RegExp(S,"gu"),l=function(){s.push.apply(s,arguments)};return D(c,t,{extra:l,onMatch:function(e,t,r,o,a){if(y({key:r,formatter:u}))l(e);else{t.length&&l(t);var s=j({key:r,arg:a,substs:i});s=k({substitution:s,ky:r,arg:a,processSubsts:A}),Array.isArray(s)?l.apply(void 0,h(s)):s&&"object"===d(s)&&"nodeType"in s?l(s.cloneNode(!0)):l(s)}n.push(r)}}),s},R=A({str:t});return v({substitutions:o}),n.length=0,R.map((function(e){return"string"==typeof e?F(e):e}))};function q(e,t){if(Array.isArray(e)&&e.every((function(e){return"string"==typeof e}))&&"string"==typeof t&&t.endsWith("Nested"))return e.map((function(e){return e.replaceAll(m(/(\\+)/g,{backslashes:1}),String.raw(V||(V=y(["$<backslashes>"],["\\$<backslashes>"])))).replaceAll(".",String.raw(z||(z=y(["."],["\\."]))))})).join(".");if("string"!=typeof e)throw new TypeError("`key` is expected to be a string (or array of strings for nested style)");return e}var J=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).messageStyle,t=void 0===e?"richNested":e;return"function"==typeof t?t:"richNested"===t?function(e,t){var r=e&&"object"===d(e)&&e.body,n=[],o=function(e){n.length||(n[0]=""),n[n.length-1]+=e};D(/(\\*)\./g,t,{extra:o,onMatch:function(e,t){o(t),n.push("")}});var i=n.map((function(e){return F(e)})),a=!1,u=r;return i.some((function(e,t,r){return!u||"object"!==d(u)||(t===r.length-1&&e in u&&u[e]&&"object"===d(u[e])&&"message"in u[e]&&"string"==typeof u[e].message&&(a={value:u[e].message,info:u[e]}),u=u[e],!1)})),a}:"rich"===t?function(e,t){var r=e&&"object"===d(e)&&e.body;return!!(r&&"object"===d(r)&&t in r&&r[t]&&"object"===d(r[t])&&"message"in r[t]&&"string"==typeof r[t].message)&&{value:r[t].message,info:r[t]}}:"plain"===t?function(e,t){var r=e&&"object"===d(e)&&e.body;return!!(r&&"object"===d(r)&&t in r&&r[t]&&"string"==typeof r[t])&&{value:r[t]}}:"plainNested"===t?function(e,t){var r=e&&"object"===d(e)&&e.body;if(r&&"object"===d(r)){var n=t.split(/(?<!\\)\./).reduce((function(e,t){return e&&"object"===d(e)&&e[t]?e[t]:null}),r);if(n&&"string"==typeof n)return{value:n}}return!1}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()},Q=function(e){var t,r=e.message,n=e.defaults,o=e.messageStyle,i=e.messageForKey,a=void 0===i?J({messageStyle:o}):i,u=e.key;if("string"==typeof r)t=r;else if(!1===n||null==n)t=!1;else{if(!n||"object"!==d(n))throw new TypeError("Default locale strings must resolve to `false`, nullish, or an object!");var s=a(n,u);t=s?s.value:s}if(!1===t)throw new Error("Key value not found for key: (".concat(u,")"));return t},X=function(e){var t=e.string,r=e.locale,n=e.locals,o=e.switches;e.maximumLocalNestingDepth;var i=e.allSubstitutions,a=void 0===i?[I]:i,u=e.insertNodes,s=void 0===u?Z:u,c=e.substitutions,l=void 0!==c&&c,f=e.dom,p=void 0!==f&&f,y=e.forceNodeReturn,v=void 0!==y&&y,d=e.throwOnMissingSuppliedFormatters,g=void 0===d||d,m=e.throwOnExtraSuppliedFormatters,b=void 0===m||m;if("string"!=typeof t)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var w=function(e){var t=M();return v?t.createTextNode(e):e},F=[];if(!l&&!a&&!g)return w(t);l||(l={});var E=s({string:t,dom:p,usedKeys:F,substitutions:l,allSubstitutions:a,locale:r,locals:n,switches:o,missingSuppliedFormatters:function(e){var t=e.key,r=e.formatter,n=r.isMatch(t);if(r.constructor.isMatchingKey(t)&&!n){if(g)throw new Error("Missing formatting key: ".concat(t));return!0}return!1},checkExtraSuppliedFormatters:function(e){var t=e.substitutions;b&&Object.keys(t).forEach((function(e){if(!F.includes(e))throw new Error("Extra formatting key: ".concat(e))}))}});if("string"==typeof E)return w(E);var D=M().createDocumentFragment();return D.append.apply(D,h(E)),D};function ee(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}function te(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var re=function(e){if(!e.includes("-"))throw new Error("Locale not available");return e.replace(/-(?:[\0-,\.-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")},ne=function(e){var t=e.locale,r=e.locales,n=e.localeMatcher,o=void 0===n?re:n;try{for(;!r.includes(t);)t=o(t)}catch(e){return!1}return t},oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeResolver,o=e.localesBasePath,i=e.localeMatcher;return ae({locales:t,defaultLocales:r,localeResolver:n,localesBasePath:o,localeMatcher:i})},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeResolver,o=e.localesBasePath,i=e.localeMatcher;return ae({locales:t,defaultLocales:r,localeResolver:n,localesBasePath:o,localeMatcher:i,headOnly:!0})},ae=te((function(e){var t=te((function(e){if("string"!=typeof e)throw new TypeError("Non-string locale type");var r=u(c,e);if("string"!=typeof r)throw new TypeError("`localeResolver` expected to resolve to (URL) string.");return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}((function(){var t=x();return ee(y?t(r,{method:"HEAD"}):t(r),(function(t){if(404===t.status)throw new Error("Trying again");return y?e:ee(t.json(),(function(t){return{locale:e,strings:t}}))}))}),(function(r){if("SyntaxError"===r.name)throw r;return ee(f(e),t)}))})),r=e.locales,n=void 0===r?"undefined"!=typeof intlDomLocale?[intlDomLocale]:"undefined"==typeof navigator?[]:navigator.languages:r,o=e.defaultLocales,i=void 0===o?["en-US"]:o,a=e.localeResolver,u=void 0===a?H:a,s=e.localesBasePath,c=void 0===s?".":s,l=e.localeMatcher,f=void 0===l?"lookup":l,p=e.headOnly,y=void 0!==p&&p;if("lookup"===f)f=re;else if("function"!=typeof f)throw new TypeError('`localeMatcher` must be "lookup" or a function!');return Y([].concat(h(n),h(i)),t,"No matching locale found for "+[].concat(h(n),h(i)).join(", "))}));function ue(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var se=function(e){var t=e.strings,r=e.resolvedLocale,n=e.messageStyle,o=void 0===n?"richNested":n,i=e.allSubstitutions,a=e.insertNodes,u=e.keyCheckerConverter,s=void 0===u?q:u,c=e.defaults,f=e.substitutions,p=e.maximumLocalNestingDepth,y=e.dom,h=void 0!==y&&y,v=e.forceNodeReturn,g=void 0!==v&&v,m=e.throwOnMissingSuppliedFormatters,b=void 0===m||m,w=e.throwOnExtraSuppliedFormatters,F=void 0===w||w;if(!t||"object"!==d(t))throw new TypeError("Locale strings must be an object!");var E=J({messageStyle:o}),D=function(e,n){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},y=u.allSubstitutions,v=void 0===y?i:y,d=u.defaults,m=void 0===d?c:d,w=u.dom,D=void 0===w?h:w,S=u.forceNodeReturn,j=void 0===S?g:S,x=u.throwOnMissingSuppliedFormatters,k=void 0===x?b:x,O=u.throwOnExtraSuppliedFormatters,M=void 0===O?F:O;e=s(e,o);var T=E(t,e),A=Q({message:!(!T||"string"!=typeof T.value)&&T.value,defaults:m,messageForKey:E,key:e});return X({string:A,locals:t.head&&t.head.locals,switches:t.head&&t.head.switches,locale:r,maximumLocalNestingDepth:p,allSubstitutions:v,insertNodes:a,substitutions:l(l({},f),n),dom:D,forceNodeReturn:j,throwOnMissingSuppliedFormatters:k,throwOnExtraSuppliedFormatters:M})};return D.resolvedLocale=r,D.strings=t,D.sort=function(e,t){return R(r,e,t)},D.sortList=function(e,t,n,o){return P(r,e,t,n,o)},D.list=function(e,t){return N(r,e,t)},D},ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeStringFinder,o=void 0===n?oe:n,i=e.localesBasePath,a=e.localeResolver,u=e.localeMatcher,s=e.messageStyle,c=e.allSubstitutions,l=e.insertNodes,f=e.keyCheckerConverter,p=e.defaults,y=e.substitutions,h=e.maximumLocalNestingDepth,v=e.dom,d=e.forceNodeReturn,g=e.throwOnMissingSuppliedFormatters,m=e.throwOnExtraSuppliedFormatters;try{return ue(o({locales:t,defaultLocales:r,localeResolver:a,localesBasePath:i,localeMatcher:u}),(function(e){var t,n,b=e.strings,w=e.locale;return t=function(){return se({strings:b,resolvedLocale:w,messageStyle:s,allSubstitutions:c,insertNodes:l,keyCheckerConverter:f,defaults:p,substitutions:y,maximumLocalNestingDepth:h,dom:v,forceNodeReturn:d,throwOnMissingSuppliedFormatters:g,throwOnExtraSuppliedFormatters:m})},(n=function(){if(!p&&r)return ue(o({locales:r,defaultLocales:[],localeResolver:a,localesBasePath:i,localeMatcher:u}),(function(e){p=e.strings,e.locale===w&&(p=null)}))}())&&n.then?n.then(t):t(n)}))}catch(e){return Promise.reject(e)}};export{C as Formatter,K as LocalFormatter,U as RegularFormatter,$ as SwitchFormatter,I as defaultAllSubstitutions,Z as defaultInsertNodes,q as defaultKeyCheckerConverter,re as defaultLocaleMatcher,H as defaultLocaleResolver,ie as findLocale,oe as findLocaleStrings,X as getDOMForLocaleString,M as getDocument,x as getFetch,ne as getMatchingLocale,J as getMessageForKeyByStyle,Q as getStringFromMessageAndDefaults,ce as i18n,se as i18nServer,E as parseJSONExtra,D as processRegex,Y as promiseChainForValues,O as setDocument,j as setFetch,w as setJSONExtra,F as unescapeBackslashes};
//# sourceMappingURL=index.esm.min.js.map
