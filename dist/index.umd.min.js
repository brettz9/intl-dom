!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).IntlDom={})}(this,(function(e){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r,t,n,o,a,u){try{var i=e[a](u),s=i.value}catch(e){return void t(e)}i.done?r(s):Promise.resolve(s).then(n,o)}function n(e){return function(){var r=this,n=arguments;return new Promise((function(o,a){var u=e.apply(r,n);function i(e){t(u,o,a,i,s,"next",e)}function s(e){t(u,o,a,i,s,"throw",e)}i(void 0)}))}}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(t.push(u.value),!r||t.length!==r);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function a(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var u=function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof r)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return n(regeneratorRuntime.mark((function n(){var o,a,u,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));case 1:return i=e.shift(),n.prev=3,n.next=6,a;case 6:return o=n.sent,n.abrupt("break",18);case 10:if(n.prev=10,n.t0=n.catch(3),!u){n.next=14;break}throw new Error(t);case 14:e.length||(u=!0),a=r(i);case 16:n.next=1;break;case 18:return n.abrupt("return",o);case 19:case"end":return n.stop()}}),n,null,[[3,10]])})))()},i=function(e,r){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof r)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(r,"/messages.json")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.messageStyle,t=void 0===r?"rich":r;return"function"==typeof t?t:"rich"===t?function(e,r){return!!(r in e&&e[r]&&"message"in e[r]&&"string"==typeof e[r].message)&&e[r].message}:"plain"===t?function(e,r){return!!(r in e&&e[r]&&"string"==typeof e[r])&&e[r]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.message,n=e.defaults,o=e.messageStyle,a=e.messageForKey,u=void 0===a?s({messageStyle:o}):a,i=e.key;if("string"!=typeof i)throw new TypeError("An options object with a `key` string is expected on `getStringFromMessageAndDefaults`");var c="string"==typeof t?t:!1!==n&&(n&&"object"===r(n)?u(n,i):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}());if(!1===c)throw new Error("Key value not found for key: (".concat(i,")"));return c},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.string,t=e.substitutions,n=void 0!==t&&t,a=e.dom,u=void 0!==a&&a,i=e.forceNodeReturn,s=void 0!==i&&i,c=e.throwOnMissingSuppliedFormatters,l=void 0===c||c,f=e.throwOnExtraSuppliedFormatters,p=void 0===f||f,g=e.bracketRegex,y=void 0===g?/(\\*)\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:g;if("string"!=typeof r)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var h=function(e){return s?document.createTextNode(e):e},d=[],F=function(){p&&Object.keys(n).forEach((function(e){if(!d.includes(e))throw new Error("Extra formatting key: ".concat(e))}))},v=function(e){if(l&&!(e in n))throw new Error("Missing formatting key: ".concat(e))};if(!n&&!l)return h(r);if(n||(n={}),!u){var m=!1,w=r.replace(y,(function(e,r,t,o){if(r.length%2)return e;v(t);var a=n[t];return"function"==typeof a&&(a=a(o)),m=m||a&&1===a.nodeType,d.push(t),r+a}));if(F(),!m)return h(w);d.length=0}for(var b,D=[],x=0;null!==(b=y.exec(r));){var S=b,E=o(S,4),k=E[1],R=E[2],j=E[3],T=y.lastIndex;if(!(k%2)){var B=T-R.length-2;B>x&&D.push(r.slice(x,B)),k.length&&D.push(k),v(R);var A=n[R];"function"==typeof A&&(A=A(j)),D.push(A),x=T,d.push(R)}}x!==r.length&&D.push(r.slice(x)),F();var O=document.createDocumentFragment();return O.append.apply(O,D),O},f=function(){var e=n(regeneratorRuntime.mark((function e(){var r,t,o,s,c,l,f,p,g,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>0&&void 0!==y[0]?y[0]:{},t=r.locales,o=void 0===t?navigator.languages:t,s=r.defaultLocales,c=void 0===s?["en-US"]:s,l=r.localeResolver,f=void 0===l?i:l,p=r.localesBasePath,g=void 0===p?".":p,e.next=3,u([].concat(a(o),a(c)),function(){var e=n(regeneratorRuntime.mark((function e(t){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"==typeof t){e.next=2;break}throw new TypeError("Non-string locale type");case 2:if("string"==typeof(n=f(g,t))){e.next=5;break}throw new TypeError("`localeResolver` expected to resolve to (URL) string.");case 5:return e.prev=5,e.next=8,fetch(n);case 8:return o=e.sent,e.next=11,o.json();case 11:return e.abrupt("return",e.sent);case 14:if(e.prev=14,e.t0=e.catch(5),"SyntaxError"!==e.t0.name){e.next=18;break}throw e.t0;case 18:if(t.includes("-")){e.next=20;break}throw new Error("Locale not available");case 20:return e.abrupt("return",r(t.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 21:case"end":return e.stop()}}),e,null,[[5,14]])})));function r(r){return e.apply(this,arguments)}return r}(),"No matching locale found!");case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=n(regeneratorRuntime.mark((function e(){var t,n,o,a,u,i,p,g,y,h,d,F,v,m=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},n=t.locales,o=t.defaultLocales,a=t.localesBasePath,u=t.localeResolver,i=t.defaults,p=t.messageStyle,g=t.forceNodeReturn,y=t.throwOnMissingSuppliedFormatters,h=t.throwOnExtraSuppliedFormatters,d=t.bracketRegex,e.next=3,f({locales:n,defaultLocales:o,localeResolver:u,localesBasePath:a});case 3:if((F=e.sent)&&"object"===r(F)){e.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return v=s({messageStyle:p}),e.abrupt("return",(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.dom,o=v(F,e),a=c({message:o,defaults:i,messageForKey:v,key:e});return l({string:a,substitutions:r,dom:n,forceNodeReturn:g,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:h,bracketRegex:d})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.defaultLocaleResolver=i,e.findLocaleStrings=f,e.getDOMForLocaleString=l,e.getMessageForKeyByStyle=s,e.getStringFromMessageAndDefaults=c,e.i18n=p,e.promiseChainForValues=u,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
