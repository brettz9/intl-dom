!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define(["exports"],r):r((e=e||self).IntlDom={})}(this,(function(e){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(e,r,t,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void t(e)}c.done?r(i):Promise.resolve(i).then(n,o)}function n(e){return function(){var r=this,n=arguments;return new Promise((function(o,u){var a=e.apply(r,n);function c(e){t(a,o,u,c,i,"next",e)}function i(e){t(a,o,u,c,i,"throw",e)}c(void 0)}))}}function o(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var t=[],n=!0,o=!1,u=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e,r){if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof r)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return n(regeneratorRuntime.mark((function t(){var n,o,u;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));case 1:return u=e.shift(),t.prev=3,t.next=6,o;case 6:return n=t.sent,t.abrupt("break",15);case 10:t.prev=10,t.t0=t.catch(3),o=r(u);case 13:t.next=1;break;case 15:return t.abrupt("return",n);case 16:case"end":return t.stop()}}),t,null,[[3,10]])})))()},c=function(e,r){return"".concat(r.replace(/\/$/,""),"/_locales/").concat(e,"/messages.json")},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.messageStyle,t=void 0===r?"rich":r;return"function"==typeof t?t:"rich"===t?function(e,r){return!!(r in e&&e[r]&&"message"in e[r]&&"string"==typeof e[r].message)&&e[r].message}:"plain"===t?function(e,r){return!!(r in e&&e[r]&&"string"==typeof e[r])&&e[r]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()},s=function(e){var t=e.message,n=e.defaults,o=e.messageStyle,u=e.messageForKey,a=void 0===u?i({messageStyle:o}):u,c=e.key,s="string"==typeof t?t:!1===n?function(){throw new Error("Key value not found for key: (".concat(c,")"))}():n&&"object"===r(n)?a(n,c):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}();if(!1===s)throw new Error("Key value not found for key: (".concat(c,")"));return s},l=function(e){var r=e.string,t=e.substitutions,n=e.dom,u=(e.throwOnMissingSuppliedFormatters,e.throwOnExtraSuppliedFormatters,e.bracketRegex),a=void 0===u?/\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:u,c=e.forceNodeReturn;if(!t)return void 0!==c&&c?document.createTextNode(r):r;if(!n){var i=!1,s=r.replace(a,(function(e,r,n){var o=t[r];return"function"==typeof o&&(o=o(n)),i=i||o&&1===o.nodeType,o}));if(!i)return s}for(var l,f=[],p=0;null!==(l=a.exec(r));){var y=a.lastIndex,F=o(l,3),m=F[0],g=F[1],v=F[2],d=t[g];"function"==typeof d&&(d=d(v));var h=y-m.length;h>p&&f.push(r.slice(p,h)),f.push(d),p=y}p!==r.length&&f.push(r.slice(p));var D=document.createDocumentFragment();return D.append.apply(D,f),D},f=function(){var e=n(regeneratorRuntime.mark((function e(r){var t,o,i,s,l,f,p,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.locales,o=void 0===t?navigator.languages:t,i=r.defaultLocales,s=void 0===i?["en-US"]:i,l=r.localeResolver,f=void 0===l?c:l,p=r.localesBasePath,y=void 0===p?".":p,e.next=3,a([].concat(u(o),u(s)),function(){var e=n(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(t,y),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),t.includes("-")){e.next=13;break}throw new Error("Locale not available");case 13:return e.abrupt("return",r(t.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));function r(r){return e.apply(this,arguments)}return r}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=n(regeneratorRuntime.mark((function e(t){var n,o,u,a,c,p,y,F,m,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.locales,o=t.defaultLocales,u=t.localesBasePath,a=t.localeResolver,c=t.defaults,p=t.messageStyle,y=t.bracketRegex,F=t.forceNodeReturn,e.next=3,f({locales:n,defaultLocales:o,localeResolver:a,localesBasePath:u});case 3:if((m=e.sent)&&"object"===r(m)){e.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return g=i({messageStyle:p}),e.abrupt("return",(function(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=t.dom,o=g(m,e),u=s({message:o,defaults:c,messageForKey:g,key:e});return l({string:u,substitutions:r,forceNodeReturn:F,dom:n,bracketRegex:y})}));case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();e.defaultLocaleResolver=c,e.findLocaleStrings=f,e.getDOMForLocaleString=l,e.getMessageForKeyByStyle=i,e.getStringFromMessageAndDefaults=s,e.i18n=p,e.promiseChainForValues=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
