!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).IntlDom={})}(this,(function(t){"use strict";function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach((function(e){s(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function a(t,e,r){return e&&i(t.prototype,e),r&&i(t,r),t}function s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function f(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function p(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,n=c(t);if(e){var o=c(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return f(this,r)}}function h(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=t&&("undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"]);if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||v(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(t){return function(t){if(Array.isArray(t))return d(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||v(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){if(t){if("string"==typeof t)return d(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(t,e):void 0}}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var g=function(t){return t.replace(/\\+/g,(function(t){return t.slice(0,t.length/2)}))},m=function(t){return jsonExtra.parse("{"+(t||"").replace(/^\{/,"").replace(/\}$/,"")+"}")},b=function(t,e,r){var n,o=r.onMatch,i=r.extra,a=r.betweenMatches,s=r.afterMatch,u=r.escapeAtOne,c=0;for(i&&(a=i,s=i,u=i);null!==(n=t.exec(e));){var l=h(n,2),f=l[0],p=l[1],v=t.lastIndex,d=v-f.length;d>c&&a(e.slice(c,d)),u&&p.length%2?(c=v,u(f)):(o.apply(void 0,y(n)),c=v)}c!==e.length&&s(e.slice(c))},w="undefined"!=typeof fetch?fetch:null,S=function(){return w},x="undefined"!=typeof document?document:null,E=function(){return x};var k=function(t,e,r){return e.sort(new Intl.Collator(t,r).compare)},O=function(t,e,r){return new Intl.ListFormat(t,r).format(e)},j=function(t,e,r,n,o){if("function"!=typeof r)return function(t,e,r,n){return k(t,e,n),O(t,e,r)}(t,e,r,n);k(t,e,o);var i,a=(i=Date.now(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(i+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=Math.trunc((i+16*Math.random())%16);return i=Math.floor(i/16),("x"===t?e:3&e|8).toString(16)}))),s=y(e).map((function(t,e){return"<<".concat(a).concat(e,">>")})),u=[],c=function(){u.push.apply(u,arguments)};b(new RegExp("<<".concat(a,"(\\d)>>"),"gu"),O(t,s,n),{betweenMatches:c,afterMatch:c,onMatch:function(t,n){c(r(e[n],n))}});var l=E().createDocumentFragment();return l.append.apply(l,u),l},M=function(t){var e=t.object;if(Array.isArray(e)){if("function"==typeof e[1]){var r=h(e,4);return{value:r[0],callback:r[1],options:r[2],extraOpts:r[3]}}var n=h(e,3);return{value:n[0],options:n[1],extraOpts:n[2]}}return{value:e}},R=function(t){var e=t.value,o=t.arg;t.key;var i,a=t.locale;if("string"==typeof e||e&&"object"===n(e)&&"nodeType"in e)return e;var s=function(t){var e=t.type,n=t.options,a=void 0===n?i:n,s=t.checkArgOptions,u=void 0!==s&&s;if("string"==typeof o){var c=h(o.split("|"),3),l=c[0],f=c[1],p=c[2];"DATE"===l&&(l="DATETIME"),l===e&&(f?u&&!p||(a=r(r({},a),m(u&&p?p:f))):a={})}return a};if(e&&"object"===n(e)&&!Array.isArray(e)){var u=Object.keys(e)[0];if(["number","date","datetime","dateRange","datetimeRange","relative","region","language","script","currency","list","plural"].includes(u)){var c,l,f=M({object:e[u]});switch(e=f.value,i=f.options,c=f.extraOpts,l=f.callback,u){case"dateRange":case"datetimeRange":return new Intl.DateTimeFormat(a,s({type:"DATERANGE",options:c})).formatRange(e,i);case"region":case"language":case"script":case"currency":return new Intl.DisplayNames(a,r(r({},s({type:u.toUpperCase()})),{},{type:u})).of(e);case"relative":var p=[i,c];return c=p[0],i=p[1],new Intl.RelativeTimeFormat(a,s({type:"RELATIVE"})).format(e,c);case"list":return l?j(a,e,l,s({type:"LIST"}),s({type:"LIST",options:c,checkArgOptions:!0})):j(a,e,s({type:"LIST"}),s({type:"LIST",options:c,checkArgOptions:!0}))}}}if("number"==typeof e)return new Intl.NumberFormat(a,s({type:"NUMBER"})).format(e);if(e&&"object"===n(e)&&"function"==typeof e.getTime)return new Intl.DateTimeFormat(a,s({type:"DATETIME"})).format(e);if(Array.isArray(e)){var v,d=e[2];return(v=new Intl.DateTimeFormat(a,s({type:"DATERANGE",options:d}))).formatRange.apply(v,y(e.slice(0,2)))}throw new TypeError("Unknown formatter")},T=function t(){o(this,t)},A=function(t){var e=t.key,r=t.body,n=t.type,o=t.messageStyle,i=W({messageStyle:void 0===o?"richNested":o})({body:r},e);if(!i)throw new Error("Key value not found for ".concat(n," key: (").concat(e,")"));return i.value},L=function(t){u(r,t);var e=p(r);function r(t){var n;return o(this,r),(n=e.call(this)).locals=t,n}return a(r,[{key:"getSubstitution",value:function(t){return A({key:t.slice(1),body:this.locals,type:"local"})}},{key:"isMatch",value:function(t){var e=t.slice(1).split("."),r=this.locals;return this.constructor.isMatchingKey(t)&&e.every((function(t){var e=t in r;return r=r[t],e}))}}],[{key:"isMatchingKey",value:function(t){return t.startsWith("-")}}]),r}(T),F=function(t){u(r,t);var e=p(r);function r(t){var n;return o(this,r),(n=e.call(this)).substitutions=t,n}return a(r,[{key:"isMatch",value:function(t){return this.constructor.isMatchingKey(t)&&t in this.substitutions}}],[{key:"isMatchingKey",value:function(t){return/^[0-9A-Z_a-z]/.test(t)}}]),r}(T),N=function(t){u(i,t);var e=p(i);function i(t,r){var n,a=r.substitutions;return o(this,i),(n=e.call(this)).switches=t,n.substitutions=a,n}return a(i,[{key:"getSubstitution",value:function(t,e){var o,i,a=e.locale,s=e.usedKeys,u=e.arg,c=e.missingSuppliedFormatters,l=this.constructor.getKey(t).slice(1),f=h(this.getMatch(l),3),p=f[0],y=f[1],v=f[2];if(s.push(v),p&&p.includes("|")){var d=h(p.split("|"),3);o=d[1],i=d[2]}if(!y)return c({key:t,formatter:this}),"\\{"+t+"}";var g=function(t,e){var n=m(i);return new Intl.NumberFormat(a,r(r({},e),n)).format(t)},b=function(t,e){var n=m(i);return new Intl.PluralRules(a,r(r({},e),n)).select(t)},w=this.substitutions[v],S=w;if("number"==typeof w)switch(o){case"NUMBER":S=g(w);break;case"PLURAL":S=b(w);break;default:S=new Intl.PluralRules(a).select(w)}else if(w&&"object"===n(w)){var x=Object.keys(w)[0];if(["number","plural"].includes(x)){var E=M({object:w[x]}),k=E.value,O=E.options;if(o||(o=x.toUpperCase()),!(x.toUpperCase()===o))throw new TypeError('Expecting type "'.concat(o.toLowerCase(),'"; instead found "').concat(x,'".'));switch(o){case"NUMBER":S=g(k,O);break;case"PLURAL":S=b(k,O)}}}var j="richNested",R=function(t){return t.replace(/\\/g,"\\\\").replace(/\./g,"\\.")};try{return A({messageStyle:j,key:S?R(S):u,body:y,type:"switch"})}catch(t){try{return A({messageStyle:j,key:"*"+R(S),body:y,type:"switch"})}catch(t){var T=Object.keys(y).find((function(t){return t.startsWith("*")}));if(!T)throw new Error("No defaults found for switch ".concat(l));return A({messageStyle:j,key:R(T),body:y,type:"switch"})}}}},{key:"isMatch",value:function(t){return t&&this.constructor.isMatchingKey(t)&&Boolean(this.getMatch(t.slice(1)).length)}},{key:"getMatch",value:function(t){var e=this,r=t.split(".");return r.reduce((function(n,o,i){if(i<r.length-1){if(!(o in n))throw new Error('Switch key "'.concat(o,'" not found (from "~').concat(t,'")'));return n[o]}var a=Object.entries(n).find((function(t){var r=h(t,1)[0];return o===e.constructor.getKey(r)}));return a?[].concat(y(a),[o]):[]}),this.switches)}}],[{key:"isMatchingKey",value:function(t){return t.startsWith("~")}},{key:"getKey",value:function(t){var e=t.match(/^(?:(?!\|)[\s\S])*/);return e&&e[0]}}]),i}(T);function P(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function D(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}function I(t,e,r){if(!t.s){if(r instanceof K){if(!r.s)return void(r.o=I.bind(null,t,e));1&e&&(e=r.s),r=r.v}if(r&&r.then)return void r.then(I.bind(null,t,e),I.bind(null,t,2));t.s=e,t.v=r;var n=t.o;n&&n(t)}}var K=function(){function t(){}return t.prototype.then=function(e,r){var n=new t,o=this.s;if(o){var i=1&o?e:r;if(i){try{I(n,1,i(this.v))}catch(t){I(n,2,t)}return n}return this}return this.o=function(t){try{var o=t.v;1&t.s?I(n,1,e?e(o):o):r?I(n,1,r(o)):I(n,2,o)}catch(t){I(n,2,t)}},n},t}();function B(t){return t instanceof K&&1&t.s}function U(t,e,r){for(var n;;){var o=t();if(B(o)&&(o=o.v),!o)return i;if(o.then){n=0;break}var i=r();if(i&&i.then){if(!B(i)){n=1;break}i=i.s}if(e){var a=e();if(a&&a.then&&!B(a)){n=2;break}}}var s=new K,u=I.bind(null,s,2);return(0===n?o.then(l):1===n?i.then(c):a.then(f)).then(void 0,u),s;function c(n){i=n;do{if(e&&(a=e())&&a.then&&!B(a))return void a.then(f).then(void 0,u);if(!(o=t())||B(o)&&!o.v)return void I(s,1,i);if(o.then)return void o.then(l).then(void 0,u);B(i=r())&&(i=i.v)}while(!i||!i.then);i.then(c).then(void 0,u)}function l(t){t?(i=r())&&i.then?i.then(c).then(void 0,u):c(i):I(s,1,i)}function f(){(o=t())?o.then?o.then(l).then(void 0,u):l(o):I(s,1,i)}}function C(t,e){return t&&t.then?t.then(e):e(t)}function _(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var G=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(t))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof e)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return _((function(){var n,o,i=!1,a=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));return C(U((function(){return!i}),void 0,(function(){var s=t.shift();return D((function(){return P(a,(function(t){n=t,i=!0}))}),(function(){if(o)throw new Error(r);t.length||(o=!0),a=e(s)}))})),(function(t){return n}))}))()},V=function(t,e){if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");if(/[\.\/\\]/.test(e))throw new TypeError("Locales cannot use file-reserved characters, `.`, `/` or `\\`");return"".concat(t.replace(/\/$/,""),"/_locales/").concat(e,"/messages.json")},$=function(t){var e=t.string,o=t.dom,i=t.usedKeys,a=t.substitutions,s=t.allSubstitutions,u=t.locale,c=t.locals,l=t.switches,f=t.maximumLocalNestingDepth,p=void 0===f?3:f,h=t.missingSuppliedFormatters,v=t.checkExtraSuppliedFormatters;if("number"!=typeof p)throw new TypeError("`maximumLocalNestingDepth` must be a number.");var d=new L(c),w=new F(a),S=new N(l,{substitutions:a}),x=/(\\*)\{((?:(?:(?!\})[\s\S])|\\\})*?)(?:(\|)((?:(?!\})[\s\S])*))?\}/g;s&&(s=Array.isArray(s)?s:[s]);var E=function(t){var e,r=t.key,n=t.arg,o=t.substs;return d.constructor.isMatchingKey(r)?e=d.getSubstitution(r):S.constructor.isMatchingKey(r)?e=S.getSubstitution(r,{locale:u,usedKeys:i,arg:n,missingSuppliedFormatters:h}):"function"==typeof(e=o[r])&&(e=e({arg:n,key:r})),s?e=s.reduce((function(t,e){return e({value:t,arg:n,key:r,locale:u})}),e):n&&/^(?:NUMBER|DATE(?:TIME|RANGE|TIMERANGE)?|REGION|LANGUAGE|SCRIPT|CURRENCY|RELATIVE|LIST)(?:\||$)/.test(n)&&(e=R({value:e,arg:n,key:r,locale:u})),e},k=1,O=function(t){var e=t.substitution,n=t.ky,o=t.arg,i=t.processSubsts;if("string"==typeof e&&e.includes("{")){if(k++>p)throw new TypeError("Too much recursion in local variables.");if(d.constructor.isMatchingKey(n)){var s,u=a;o&&(s=m(o),u=r(r({},a),s)),e=i({str:e,substs:u,formatter:d}),s&&v({substitutions:s})}else S.constructor.isMatchingKey(n)&&(e=i({str:e}))}return e};if(!o){var j=!1,M=function t(e){var r=e.str,o=e.substs,s=void 0===o?a:o,u=e.formatter,c=void 0===u?w:u;return r.replace(x,(function(e,r,o,a,u){if(r.length%2)return e;if(h({key:o,formatter:c}))return e;var l=E({key:o,arg:u,substs:s});return l=O({substitution:l,ky:o,arg:u,processSubsts:t}),j=j||l&&"object"===n(l)&&"nodeType"in l,i.push(o),r+l}))}({str:e});if(!j)return v({substitutions:a}),i.length=0,g(M);i.length=0}k=1;var T=function t(e){var r=e.str,o=e.substs,s=void 0===o?a:o,u=e.formatter,c=void 0===u?w:u,l=[],f=new RegExp(x,"gu"),p=function(){l.push.apply(l,arguments)};return b(f,r,{extra:p,onMatch:function(e,r,o,a,u){if(h({key:o,formatter:c}))p(e);else{r.length&&p(r);var l=E({key:o,arg:u,substs:s});l=O({substitution:l,ky:o,arg:u,processSubsts:t}),Array.isArray(l)?p.apply(void 0,y(l)):l&&"object"===n(l)&&"nodeType"in l?p(l.cloneNode(!0)):p(l)}i.push(o)}}),l}({str:e});return v({substitutions:a}),i.length=0,T.map((function(t){return"string"==typeof t?g(t):t}))},W=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.messageStyle,r=void 0===e?"richNested":e;return"function"==typeof r?r:"richNested"===r?function(t,e){var r=t&&"object"===n(t)&&t.body,o=[],i=function(t){o.length||(o[0]=""),o[o.length-1]+=t};b(/(\\*)\./g,e,{extra:i,onMatch:function(t,e){i(e),o.push("")}});var a=o.map((function(t){return g(t)})),s=!1,u=r;return a.some((function(t,e,r){return!u||"object"!==n(u)||(e===r.length-1&&t in u&&u[t]&&"object"===n(u[t])&&"message"in u[t]&&"string"==typeof u[t].message&&(s={value:u[t].message,info:u[t]}),u=u[t],!1)})),s}:"rich"===r?function(t,e){var r=t&&"object"===n(t)&&t.body;return!!(r&&"object"===n(r)&&e in r&&r[e]&&"object"===n(r[e])&&"message"in r[e]&&"string"==typeof r[e].message)&&{value:r[e].message,info:r[e]}}:"plain"===r?function(t,e){var r=t&&"object"===n(t)&&t.body;return!!(r&&"object"===n(r)&&e in r&&r[e]&&"string"==typeof r[e])&&{value:r[e]}}:function(){throw new TypeError("Unknown `messageStyle` ".concat(r))}()},z=function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.message,o=e.defaults,i=e.messageStyle,a=e.messageForKey,s=void 0===a?W({messageStyle:i}):a,u=e.key;if("string"!=typeof u)throw new TypeError("An options object with a `key` string is expected on `getStringFromMessageAndDefaults`");if("string"==typeof r)t=r;else if(!1===o||null==o)t=!1;else{if(!o||"object"!==n(o))throw new TypeError("Default locale strings must resolve to `false`, nullish, or an object!");(t=s({body:o},u))&&(t=t.value)}if(!1===t)throw new Error("Key value not found for key: (".concat(u,")"));return t},H=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.string,r=t.locale,n=t.locals,o=t.switches;t.maximumLocalNestingDepth;var i=t.allSubstitutions,a=void 0===i?[R]:i,s=t.insertNodes,u=void 0===s?$:s,c=t.substitutions,l=void 0!==c&&c,f=t.dom,p=void 0!==f&&f,h=t.forceNodeReturn,v=void 0!==h&&h,d=t.throwOnMissingSuppliedFormatters,g=void 0===d||d,m=t.throwOnExtraSuppliedFormatters,b=void 0===m||m;if("string"!=typeof e)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var w=function(t){var e=E();return v?e.createTextNode(t):t},S=[],x=function(t){var e=t.substitutions;b&&Object.keys(e).forEach((function(t){if(!S.includes(t))throw new Error("Extra formatting key: ".concat(t))}))},k=function(t){var e=t.key,r=t.formatter,n=r.isMatch(e);if(r.constructor.isMatchingKey(e)&&!n){if(g)throw new Error("Missing formatting key: ".concat(e));return!0}return!1};if(!l&&!a&&!g)return w(e);l||(l={});var O=u({string:e,dom:p,usedKeys:S,substitutions:l,allSubstitutions:a,locale:r,locals:n,switches:o,missingSuppliedFormatters:k,checkExtraSuppliedFormatters:x});if("string"==typeof O)return w(O);var j=E(),M=j.createDocumentFragment();return M.append.apply(M,y(O)),M};function J(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}function Y(t){return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];try{return Promise.resolve(t.apply(this,e))}catch(t){return Promise.reject(t)}}}var Z=function(t){if(!t.includes("-"))throw new Error("Locale not available");return t.replace(/\x2D(?:(?!\x2D)[\s\S])*$/,"")},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locales,r=t.defaultLocales,n=t.localeResolver,o=t.localesBasePath,i=t.localeMatcher;return Q({locales:e,defaultLocales:r,localeResolver:n,localesBasePath:o,localeMatcher:i})},Q=Y((function(t){var e=Y((function(t){if("string"!=typeof t)throw new TypeError("Non-string locale type");var r=s(c,t);if("string"!=typeof r)throw new TypeError("`localeResolver` expected to resolve to (URL) string.");return function(t,e){try{var r=t()}catch(t){return e(t)}return r&&r.then?r.then(void 0,e):r}((function(){var e=S();return J(h?e(r,{method:"HEAD"}):e(r),(function(e){if(404===e.status)throw new Error("Trying again");return h?t:J(e.json(),(function(e){return{locale:t,strings:e}}))}))}),(function(r){if("SyntaxError"===r.name)throw r;return J(f(t),e)}))})),r=t.locales,n=void 0===r?"undefined"!=typeof intlDomLocale?[intlDomLocale]:"undefined"==typeof navigator?[]:navigator.languages:r,o=t.defaultLocales,i=void 0===o?["en-US"]:o,a=t.localeResolver,s=void 0===a?V:a,u=t.localesBasePath,c=void 0===u?".":u,l=t.localeMatcher,f=void 0===l?"lookup":l,p=t.headOnly,h=void 0!==p&&p;if("lookup"===f)f=Z;else if("function"!=typeof f)throw new TypeError('`localeMatcher` must be "lookup" or a function!');return G([].concat(y(n),y(i)),e,"No matching locale found!")}));function X(t,e,r){return r?e?e(t):t:(t&&t.then||(t=Promise.resolve(t)),e?t.then(e):t)}var tt=function(t){var e=t.strings,o=t.resolvedLocale,i=t.messageStyle,a=t.allSubstitutions,s=t.insertNodes,u=t.defaults,c=t.substitutions,l=t.maximumLocalNestingDepth,f=t.dom,p=void 0!==f&&f,h=t.forceNodeReturn,y=void 0!==h&&h,v=t.throwOnMissingSuppliedFormatters,d=void 0===v||v,g=t.throwOnExtraSuppliedFormatters,m=void 0===g||g;if(!e||"object"!==n(e))throw new TypeError("Locale strings must be an object!");var b=W({messageStyle:i}),w=function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=i.allSubstitutions,h=void 0===f?a:f,v=i.defaults,g=void 0===v?u:v,w=i.dom,S=void 0===w?p:w,x=i.forceNodeReturn,E=void 0===x?y:x,k=i.throwOnMissingSuppliedFormatters,O=void 0===k?d:k,j=i.throwOnExtraSuppliedFormatters,M=void 0===j?m:j,R=b(e,t),T=z({message:R&&R.value||!1,defaults:g,messageForKey:b,key:t});return H({string:T,locals:e.head&&e.head.locals,switches:e.head&&e.head.switches,locale:o,maximumLocalNestingDepth:l,allSubstitutions:h,insertNodes:s,substitutions:r(r({},c),n),dom:S,forceNodeReturn:E,throwOnMissingSuppliedFormatters:O,throwOnExtraSuppliedFormatters:M})};return w.resolvedLocale=o,w.strings=e,w.sort=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return k.apply(void 0,[o].concat(e))},w.sortList=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return j.apply(void 0,[o].concat(e))},w.list=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return O.apply(void 0,[o].concat(e))},w};t.Formatter=T,t.LocalFormatter=L,t.RegularFormatter=F,t.SwitchFormatter=N,t.defaultAllSubstitutions=R,t.defaultInsertNodes=$,t.defaultLocaleMatcher=Z,t.defaultLocaleResolver=V,t.findLocale=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locales,r=t.defaultLocales,n=t.localeResolver,o=t.localesBasePath,i=t.localeMatcher;return Q({locales:e,defaultLocales:r,localeResolver:n,localesBasePath:o,localeMatcher:i,headOnly:!0})},t.findLocaleStrings=q,t.getDOMForLocaleString=H,t.getDocument=E,t.getFetch=S,t.getMatchingLocale=function(t){var e=t.locale,r=t.locales,n=t.localeResolver,o=void 0===n?Z:n;try{for(;!r.includes(e);)e=o(e)}catch(t){return!1}return e},t.getMessageForKeyByStyle=W,t.getStringFromMessageAndDefaults=z,t.i18n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.locales,r=t.defaultLocales,n=t.localeStringFinder,o=void 0===n?q:n,i=t.localesBasePath,a=t.localeResolver,s=t.localeMatcher,u=t.messageStyle,c=t.allSubstitutions,l=t.insertNodes,f=t.defaults,p=t.substitutions,h=t.maximumLocalNestingDepth,y=t.dom,v=t.forceNodeReturn,d=t.throwOnMissingSuppliedFormatters,g=t.throwOnExtraSuppliedFormatters;try{return X(o({locales:e,defaultLocales:r,localeResolver:a,localesBasePath:i,localeMatcher:s}),(function(t){var e=t.strings,r=t.locale;return tt({strings:e,resolvedLocale:r,messageStyle:u,allSubstitutions:c,insertNodes:l,defaults:f,substitutions:p,maximumLocalNestingDepth:h,dom:y,forceNodeReturn:v,throwOnMissingSuppliedFormatters:d,throwOnExtraSuppliedFormatters:g})}))}catch(t){return Promise.reject(t)}},t.i18nServer=tt,t.parseJSONExtra=m,t.processRegex=b,t.promiseChainForValues=G,t.setDocument=function(t){x=t},t.setFetch=function(t){w=t},t.unescapeBackslashes=g,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
