!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).IntlDom={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,u){var a=e.apply(t,n);function c(e){r(a,o,u,c,i,"next",e)}function i(e){r(a,o,u,c,i,"throw",e)}c(void 0)}))}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,u=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e,t){return e.reduce(function(){var e=n(regeneratorRuntime.mark((function e(r,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r;case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",t(n));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}(),Promise.reject(new Error("Intentionally reject so as to begin checking chain")))},c=function(e,t){return"".concat(t.replace(/\/$/,""),"/_locales/").concat(e,"/messages.json")},i=function(){var e=n(regeneratorRuntime.mark((function e(t){var r,o,i,s,l,f,p,F;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.locales,o=void 0===r?navigator.languages:r,i=t.defaultLocales,s=void 0===i?["en-US"]:i,l=t.localeResolver,f=void 0===l?c:l,p=t.localesBasePath,F=void 0===p?".":p,e.next=3,a([].concat(u(o),u(s)),function(){var e=n(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(r,F),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),r.includes("-")){e.next=13;break}throw new Error("Locale not available");case 13:return e.abrupt("return",t(r.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageStyle,r=void 0===t?"rich":t;return"function"==typeof r?r:"rich"===r?function(e,t){return!!(t in e&&e[t]&&"message"in e[t]&&"string"==typeof e[t].message)&&e[t].message}:"plain"===r?function(e,t){return!!(t in e&&e[t]&&"string"==typeof e[t])&&e[t]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(r))}()},l=function(e){var r=e.message,n=e.defaults,o=e.messageStyle,u=e.messageForKey,a=void 0===u?s({messageStyle:o}):u,c=e.key,i="string"==typeof r?r:!1===n?function(){throw new Error("Key value not found for key: (".concat(c,")"))}():n&&"object"===t(n)?a(n,c):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}();if(!1===i)throw new Error("Key value not found for key: (".concat(c,")"));return i},f=function(e){var t=e.string,r=e.substitutions,n=e.dom,u=e.bracketRegex,a=void 0===u?/\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:u,c=e.forceNodeReturn;if(!r)return void 0!==c&&c?document.createTextNode(t):t;if(!n){var i=!1,s=t.replace(a,(function(e,t,n){var o=r[t];return"function"==typeof o&&(o=o(n)),i=i||o&&1===o.nodeType,o}));if(!i)return s}for(var l,f=[],p=0;null!==(l=a.exec(t));){var F=a.lastIndex,y=o(l,3),v=y[0],g=y[1],m=y[2],d=r[g];"function"==typeof d&&(d=d(m));var D=F-v.length;D>p&&f.push(t.slice(p,D)),f.push(d),p=F}p!==t.length&&f.push(t.slice(p));var h=document.createDocumentFragment();return h.append.apply(h,f),h},p=function(){var e=n(regeneratorRuntime.mark((function e(r){var n,o,u,a,c,p,F,y,v,g;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.locales,o=r.defaultLocales,u=r.localesBasePath,a=r.localeResolver,c=r.defaults,p=r.messageStyle,F=r.bracketRegex,y=r.forceNodeReturn,e.next=3,i({locales:n,defaultLocales:o,localeResolver:a,localesBasePath:u});case 3:if((v=e.sent)&&"object"===t(v)){e.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return g=s({messageStyle:p}),e.abrupt("return",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.dom,o=g(v,e),u=l({message:o,defaults:c,messageForKey:g,key:e});return f({string:u,substitutions:t,forceNodeReturn:y,dom:n,bracketRegex:F})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();e.DefaultLocaleResolver=c,e.findLocaleStrings=i,e.getDOMForLocaleString=f,e.getMessageForKeyByStyle=s,e.getStringFromMessageAndDefaults=l,e.i18n=p,e.promiseChainForValues=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
