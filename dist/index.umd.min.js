!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).IntlDom={})}(this,(function(e){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t,r,n,o,u,a){try{var i=e[u](a),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function n(e){return function(){var t=this,n=arguments;return new Promise((function(o,u){var a=e.apply(t,n);function i(e){r(a,o,u,i,s,"next",e)}function s(e){r(a,o,u,i,s,"throw",e)}i(void 0)}))}}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,u=void 0;try{for(var a,i=e[Symbol.iterator]();!(n=(a=i.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw u}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var a=function(e,t){if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof t)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return n(regeneratorRuntime.mark((function r(){var n,o,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:o=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));case 1:return u=e.shift(),r.prev=3,r.next=6,o;case 6:return n=r.sent,r.abrupt("break",15);case 10:r.prev=10,r.t0=r.catch(3),o=t(u);case 13:r.next=1;break;case 15:return r.abrupt("return",n);case 16:case"end":return r.stop()}}),r,null,[[3,10]])})))()},i=function(e,t){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(t,"/messages.json")},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.messageStyle,r=void 0===t?"rich":t;return"function"==typeof r?r:"rich"===r?function(e,t){return!!(t in e&&e[t]&&"message"in e[t]&&"string"==typeof e[t].message)&&e[t].message}:"plain"===r?function(e,t){return!!(t in e&&e[t]&&"string"==typeof e[t])&&e[t]}:function(){throw new TypeError("Unknown `messageStyle` ".concat(r))}()},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.message,n=e.defaults,o=e.messageStyle,u=e.messageForKey,a=void 0===u?s({messageStyle:o}):u,i=e.key;if("string"!=typeof i)throw new TypeError("An options object with a `key` string is expected on `getStringFromMessageAndDefaults`");var c="string"==typeof r?r:!1!==n&&(n&&"object"===t(n)?a(n,i):function(){throw new TypeError("Default locale strings must resolve to `false` or an object!")}());if(!1===c)throw new Error("Key value not found for key: (".concat(i,")"));return c},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.string,r=e.substitutions,n=void 0!==r&&r,u=e.dom,a=void 0!==u&&u,i=e.forceNodeReturn,s=void 0!==i&&i,c=e.throwOnMissingSuppliedFormatters,l=void 0===c||c,f=e.throwOnExtraSuppliedFormatters,p=void 0===f||f,g=e.bracketRegex,y=void 0===g?/(\\*)\{((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?)(?:\|((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g:g;if("string"!=typeof t)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var F=function(e){return s?document.createTextNode(e):e},d=[],h=function(){p&&Object.keys(n).forEach((function(e){if(!d.includes(e))throw new Error("Extra formatting key: ".concat(e))}))},m=function(e){if(l&&!(e in n))throw new Error("Missing formatting key ".concat(e))};if(!n&&!l)return F(t);if(n||(n={}),!a){var v=!1,w=t.replace(y,(function(e,t,r,o){if(t.length%2)return e;m(r);var u=n[r];return"function"==typeof u&&(u=u(o)),v=v||u&&1===u.nodeType,d.push(r),t+u}));if(h(),!v)return F(w);d.length=0}for(var b,D=[],x=0;null!==(b=y.exec(t));){var S=b,E=o(S,4),k=E[0],R=E[1],j=E[2],B=E[3];if(!(k%2)){var A=y.lastIndex,T=A-R.length;T>x&&D.push(t.slice(x,T)),k.length&&D.push(k),m(j);var O=n[j];"function"==typeof O&&(O=O(B)),D.push(O),x=A,d.push(j)}}x!==t.length&&D.push(t.slice(x)),h();var C=document.createDocumentFragment();return C.append.apply(C,D),C},f=function(){var e=n(regeneratorRuntime.mark((function e(){var t,r,o,s,c,l,f,p,g,y=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},r=t.locales,o=void 0===r?navigator.languages:r,s=t.defaultLocales,c=void 0===s?["en-US"]:s,l=t.localeResolver,f=void 0===l?i:l,p=t.localesBasePath,g=void 0===p?".":p,e.next=3,a([].concat(u(o),u(c)),function(){var e=n(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f(g,r),e.prev=1,e.next=4,fetch(n);case 4:return e.next=6,e.sent.json();case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(1),r.includes("-")){e.next=13;break}throw new Error("Locale not available");case 13:return e.abrupt("return",t(r.replace(/\x2D(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")));case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));function t(t){return e.apply(this,arguments)}return t}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=n(regeneratorRuntime.mark((function e(){var r,n,o,u,a,i,p,g,y,F,d,h,m,v=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>0&&void 0!==v[0]?v[0]:{},n=r.locales,o=r.defaultLocales,u=r.localesBasePath,a=r.localeResolver,i=r.defaults,p=r.messageStyle,g=r.forceNodeReturn,y=r.throwOnMissingSuppliedFormatters,F=r.throwOnExtraSuppliedFormatters,d=r.bracketRegex,e.next=3,f({locales:n,defaultLocales:o,localeResolver:a,localesBasePath:u});case 3:if((h=e.sent)&&"object"===t(h)){e.next=6;break}throw new TypeError("Locale strings must be an object!");case 6:return m=s({messageStyle:p}),e.abrupt("return",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.dom,o=m(h,e),u=c({message:o,defaults:i,messageForKey:m,key:e});return l({string:u,substitutions:t,dom:n,forceNodeReturn:g,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:F,bracketRegex:d})}));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e.defaultLocaleResolver=i,e.findLocaleStrings=f,e.getDOMForLocaleString=l,e.getMessageForKeyByStyle=s,e.getStringFromMessageAndDefaults=c,e.i18n=p,e.promiseChainForValues=a,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
